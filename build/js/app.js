"use strict";angular.module("snailbox",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(o,r){o.state("login",{url:"/login",templateUrl:"./app/features/login/loginTmpl.html",controller:"loginCtrl as loginCtrl"}).state("signup",{url:"/signup",templateUrl:"./app/features/signup/signupTmpl.html",controller:"signupCtrl as signupCtrl"}).state("userHome",{url:"/user/:id",templateUrl:"./app/features/userHome/userHomeTmpl.html",controller:"userHomeCtrl as userHomeCtrl"}),r.otherwise("/login")}]),angular.module("snailbox").constant("API",{SERVER_LOCAL_MDB:"http://localhost:4800/api/v1/",SERVER_HEROKU:"http://snailbox-api.herokuapp.com/api/v1/"}),angular.module("snailbox").service("authService",["$http","API",function(o,r){this.signup=function(t){return o({method:"POST",url:r.SERVER_HEROKU+"signup",dataType:"json",data:t}).then(function(o){return o.data})},this.login=function(t){return console.log("sending data on service",t),o({method:"POST",url:r.SERVER_HEROKU+"login",dataType:"json",data:t}).then(function(o){return o.data})["catch"](function(o){return o.data})}}]),angular.module("snailbox").controller("loginCtrl",["$state","$location","authService",function(o,r,t){var n=this;n.loading=!1,n.error=!1,n.goToSignup=function(){o.go("signup")},n.submitLoginForm=function(o){return n.error=!1,o?(n.loading=!0,void t.login(n.data).then(function(o){return console.log("loginResponse",o),n.loading=!1,"Login Success"!==o.message?(n.error=!0,n.data.password="",!1):void r.path("/user/"+o.user._id)})):(console.log("Error - form not valid"),!1)}}]),angular.module("snailbox").controller("signupCtrl",["$state","$location","authService",function(o,r,t){var n=this;n.loading=!1,n.error=!1,n.passwordError=!1,n.goToLogin=function(){o.go("login")},n.submitSignupForm=function(o){return console.log("signupCtrl.data",n.data),n.error=!1,n.passwordError=!1,!!o&&(n.data.password!==n.data.password2?(n.error=!0,n.passwordError=!0,n.data.password="",n.data.password2="",!1):(n.loading=!0,void t.signup(n.data).then(function(o){return console.log("signupResponse",o),n.loading=!1,"Registration Success"!==o.message?(n.error=!0,n.data.password="",n.data.password2="",!1):void r.path("/user/"+o.user._id)})))}}]),angular.module("snailbox").controller("userHomeCtrl",function(){var o=this;o.test="If you can read this, your userHomeCtrl is set up correctly :)",console.log("userHomeCtrl.test ==>> ",o.test)});